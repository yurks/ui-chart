/*! ui-chart v0.1.0 | yurks.github.io | MIT */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e){t.exports=window},function(t,e){var i="0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz".split("");t.exports=function(t,e){var s=0,n="";for(e=e||i.length,t=t||13;s<t;s+=1)n+=i[~~(Math.random()*e)];return n}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(2);var s=i(0),n=i.n(s),r=i(1),o=i.n(r);let h;class a{constructor(t,e="div"){this.tag=e,this.id="ui"+o()(10),t&&("string"==typeof t&&(t=[t]),Array.isArray(t)&&(t={class:t.map(t=>"ui-chart--"+t)})),this._attrs=t||{},this._attrs.id=this.id,this.children=[],this.attr=new Proxy(this,{get({_attrs:t},e){let i=t[e];return""===i&&(i=!0),i},set:({$el:t,_attrs:e},i,s)=>(s=!0===s?"":s,e[i]=s,t&&t.setAttribute(i,s),!0),deleteProperty:({$el:t,_attrs:e},i)=>(delete e[i],t&&t.removeAttribute(i),!0)})}get attrs(){const{_attrs:t}=this;let e="";for(const i in t)t.hasOwnProperty(i)&&(e+=` ${i}="${t[i]}"`);return e}set attrs(t){if(Object.assign(this._attrs,t),this.$el)for(const e in t)t.hasOwnProperty(e)&&this.$el.setAttribute(e,t[e])}addChild(t){return t&&"tag"in t&&(t.parent=this,this.children.push(t),t.constructChild&&t.constructChild(t)),this}renderChildren(){return this.children.map(t=>t.render()).join("")}render(){return`<${this.tag}${this.attrs}>${this.renderChildren()}</${this.tag}>`}_afterCreate(t){this.children.forEach(e=>{e.afterCreate&&(e.$el=t.querySelector("#"+e.id),e.afterCreate()),e._afterCreate(t)})}create(){(h=h||s.document.createElement("div")).innerHTML=this.render();const{firstChild:t}=h;return this._afterCreate(t),h.removeChild(t)}}class d extends a{constructor(t,e){super({"vector-effect":"non-scaling-stroke",fill:"none"},"path"),this.columnX=t,this.columnY=e}constructChild({columnY:t,columnX:e}){const i=e.render,s=t.render;this.attr.d=`M${e.data.map((t,e)=>`L${i(e)} ${s(e)}`).join(" ").slice(1)}`,this.attr.stroke=t.color}}class c{constructor({column:t,types:e,names:i,colors:s}){this.data=t,this.type=this._def(e,"x"),"x"!==this.type&&(this.name=this._def(i),this.color=this._def(s))}_def(t,e){return t&&"object"==typeof t?t[this.id]:t||e}get data(){return this._data}set data(t){this.id=t[0],this._data=t.slice(1),this.first=this._data[0],this.total=this._data.length,this.max=Math.max(...this.data)}}class u extends a{constructor({columnX:t,columnsY:e}){super(void 0,"g"),e.forEach(e=>this.addChild(new d(t,e)))}}class l extends a{constructor(t){super({xmlns:"http://www.w3.org/2000/svg",width:"100%",preserveAspectRatio:"none"},"svg"),this.width=t.width,this.height=t.height,this.viewBox={minX:0,minY:0,width:this.width,height:this.height},this.setViewBox(),this.maxZoom=40,this.attr.height=this.height,this.addChild(new u(t))}afterCreate(){}setViewBox(t){const{viewBox:e}=this;t&&Object.assign(e,{...t}),this.attr.viewBox=`${e.minX} ${e.minY} ${e.width} ${e.height}`}setView(t,e){let i=this.width*t/100,s=this.width*e/100;this.setViewBox({minX:i,width:s})}setWidth(t){const e=this.viewBox.width;return!e||t>e?(this.width=t,this.setViewBox({width:t}),t):e}}class f extends a{constructor(t){super("graph"),this.svg=new l(t),this.svg.setView(t.view.pos,t.view.width),this.addChild(this.svg)}}class p{constructor(t){this.view={pos:70,width:30},this.maxZoom=40,this.width=0,this.height=300,this.raw=t,this.columnX=null,this.columnsY=t&&t.columns.map(e=>new c({column:e,...t})).filter(t=>"x"!==t.type||!this.initX(t)).map(t=>this.initY(t))||[]}initX(t){this.width=t.total*this.maxZoom,this.columnX=Object.assign(t,{offset:t.first,width:this.width,height:this.height});const{offset:e,max:i,width:s,data:n}=t;return t.render=(t=>(n[t]-e)/(i-e)*s),t}initY(t){const{height:e}=this.columnX,{max:i,data:s}=t;return t.render=(t=>e-s[t]/i*e),t}}class m{constructor({$el:t,attr:e},i,s={}){this.$el=t,this.attr=e,this.$container=i.$el,this.handlers="function"==typeof s?{move:s}:s,this.offset=0,this.bind()}getOffset(){return this.$container.getBoundingClientRect().left+(n.a.pageXOffset||s.document.documentElement.scrollLeft)-(s.document.documentElement.clientLeft||0)}getPosition(t){let e=((t.pageX||t.touches&&t.touches[0].pageX||0)-this.offset)/this.$container.offsetWidth;return e<0&&(e=0),e>1&&(e=1),e}bind(){const{move:t}=this.handlers;if(!t)return;const e=t=>{this.start(t)};s.PointerEvent&&(this.$el.style.touchAction="none"),this.on(this.$el,"mousedown",e).on(this.$el,"touchstart",e)}start(t){const{start:e,move:i,end:n}=this.handlers;this.offset=this.getOffset(),this.attr.moving=!0,e&&e(t,this),t.stopPropagation(),t.preventDefault();const r=t=>{i(t,this)},o=t=>{this.off(s.document,"mousemove",r).off(s.document,"touchmove",r).off(s.document,"mouseup",o).off(s.document,"touchend",o),this.offset=0,delete this.attr.moving,n&&n(t,this)};this.on(s.document,"mousemove",r).on(s.document,"touchmove",r).on(s.document,"mouseup",o).on(s.document,"touchend",o)}on(t,e,i){return t.addEventListener(e,i),this}off(t,e,i){return t.removeEventListener(e,i),this}}class w extends a{constructor(t){super("viewport-boundary","span"),t?this.attr.right=!0:this.attr.left=!0}onMoveStart(t,e){this._lastPosition=e.getPosition(t)}onMove(t,e){const i=e.getPosition(t),s=this._lastPosition-i;this.parent.parent.widthDelta(s,!!this.attr.right),this._lastPosition=i}afterCreate(){new m(this,this.parent.parent.parent,{start:(...t)=>this.onMoveStart(...t),move:(...t)=>this.onMove(...t)})}}class v extends a{constructor(t){super("viewport-wrapper","span"),this.addChild(new w),this.addChild(new w(!0))}onMoveStart(t,e){this._lastPosition=e.getPosition(t)}onMove(t,e){const i=e.getPosition(t);this.parent.positionDelta(this._lastPosition-i),this._lastPosition=i}afterCreate(){new m(this,this.parent.parent,{start:(...t)=>this.onMoveStart(...t),move:(...t)=>this.onMove(...t)})}}class g extends a{constructor({view:t}){super("viewport"),this.addChild(new v),this.update(t.pos,t.width)}afterCreate(){}update(t,e){"number"==typeof e&&e+t>100&&(e=100-t),this._width=e,this._pos=t,this.attr.style=`left:${t}%;width:${e}%;`,this.parent&&this.parent.parent.sync(t,e,this)}positionDelta(t,e){let i=this._width,s=this._pos,n=s-100*t;return n<0?n=0:n+i>100&&!e&&(n=100-i),e&&i<=5&&t<0&&(n=s),e?n:this.update(n,i)}widthDelta(t,e){let i=this._pos,s=this._width;e||(i=this.positionDelta(t,!0),t=(this._pos-i)/100,t*=-1);let n=s-100*t;return n<5?n=5:n+i>100&&(n=100-i),this.update(i,n)}}class x extends a{constructor(t){super("bar"),this.addChild(new g(t)),this.addChild(new l(t))}afterCreate(){}}class y extends a{constructor(t){super("container");const e=new p(t);this.graph=new f(e),this.preview=new x(e),this.addChild(this.graph),this.addChild(this.preview)}afterCreate(){}sync(t,e,i){this.graph.svg.setView(t,e)}}function _(t,e){const i=new a;i.addChild(new y(e)),t.appendChild(i.create())}i.d(e,"uiChart",function(){return _})}])});